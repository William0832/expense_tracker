<h3>Hi {{userName}}</h3>

<div class="col-8 d-flex justify-content-around">
  {{!-- 類別下拉選單 --}}

  <form action="/" class="form-inline d-flex justify-content-around">
    <div>
      <label for="month">月份</label>
      <select class="form-control ml-1" id="month" name="month" onchange="this.form.submit()">
        {{#each monthData}}
        <option value="{{this.index}}">{{this.name}}</option>
        {{/each}}
      </select>
    </div>
    <div>
      <label for="category">分類</label>
      <select class="form-control" id="category" name="category" onchange="this.form.submit()">
        {{#each categoryData}}
        <option value="{{this.name}}">{{this.name}}</option>
        {{/each}}
      </select>
    </div>
  </form>

</div>
<div class="col-8 d-flex justify-content-between my-3 font-weight-bold">
  <p>總金額 :</p>
  <h1 class="text-primary">{{sum}}</h1>
</div>

{{!-- 紀錄項目 --}}
<ul class="list-group">
  {{#each records}}
  <li class="list-group-item">
    <div class="row">
      <div class="col-8 mr-auto d-flex justify-content-between align-items-center bg-light rounded">
        <div class="d-flex ">
          {{!-- icon --}}
          <h1 class="{{this.icon}} pt-3 pr-3"></h1>

          <div class="d-flex flex-column">
            {{!-- name --}}
            <h4 class="mt-2">{{this.name}}</h4>
            {{!-- time --}}
            <p>{{this.date}}</p>
          </div>
        </div>

        {{!-- amount --}}
        <h4>{{this.amount}}</h4>
      </div>

      <div class="col-auto mt-2">
        <a href="/records/edit/{{this._id}}" class="btn btn-white">修改</a>
        <form action="/records/delete/{{this._id}}?_method=DELETE" method="post" style="display:inline">
          <button type="button" class="btn btn-white" data-toggle="modal" data-target="#id{{this._id}}">刪除</button>

          {{!-- modal box --}}
          <div class="modal fade" id="id{{this._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">

                <div class="modal-header">
                  <h5 class="modal-title text-danger" id="exampleModalLabel">刪除警告</h5>
                </div>

                <div class="modal-body text-left">
                  <p class="font-weight-bold">{{this.name}}</p>
                  <p>確定要<span class="font-weight-bold text-danger">刪除</span>此筆資料嗎?</p>
                </div>

                <div class="modal-footer">
                  <button type="button" class="btn border-dark" data-dismiss="modal">返回</button>
                  <button type="submit" class="btn btn-danger border-dark">刪除</button>
                </div>
              </div>
            </div>
          </div>

        </form>
      </div>

    </div>
  </li>
  {{/each}}
</ul>

{{!-- 新增按鈕 --}}
<a href="/records/new" class="btn btn-primary text-center mx-5 mt-3 p-2 border-dark">新增支出</a>